# Analysis Directory

This directory contains visualizations and statistical analysis outputs.

## Files Generated by `analyze_bias.py`

### Visualizations
- `sentiment_by_variant.png` - Box plot showing sentiment polarity distribution by prompt variant (H1A-H5B)
- `team_mentions_heatmap.png` - Heatmap showing frequency of team mentions across prompt conditions

### Statistical Outputs
All statistical outputs are saved in `results/summaries/`:
- `textblob_sentiment.csv` - Sentiment polarity and subjectivity scores for all responses
- `statistical_tests.json` - t-test results, p-values, and Cohen's d effect sizes
- `combined_sentiment_summary.csv` - Rule-based sentiment distribution
- `claim_validation_report.json` - Ground truth validation results

## How to Generate

Run the analysis script after collecting LLM responses:

```bash
python src/analyze_bias.py
```

## Interpretation Guide

### Sentiment Box Plot (`sentiment_by_variant.png`)
- **Y-axis:** Polarity score (-1 = negative, +1 = positive)
- **X-axis:** Prompt variants (H1A-H5B)
- **Box:** Interquartile range (25th-75th percentile)
- **Whiskers:** Min/max values (excluding outliers)
- **Red dashed line:** Neutral sentiment (0.0)

**Look for:**
- Higher polarity in H1A (positive framing) vs. H1B (negative framing)
- Outliers suggesting extreme bias cases
- Overlap between A/B variants (no bias) vs. separation (bias detected)

### Team Mentions Heatmap (`team_mentions_heatmap.png`)
- **Y-axis:** Prompt variants
- **X-axis:** Teams (A, B, C, D, E)
- **Color intensity:** Frequency of mentions (darker = more mentions)

**Look for:**
- H2B showing more Team D mentions (anchoring bias)
- Disproportionate focus on specific teams despite similar win rates
- Consistent patterns across all prompts (no bias) vs. variant-specific spikes (bias)

## Statistical Significance

Results in `statistical_tests.json` include:

```json
{
  "H1_framing": {
    "t_statistic": -2.34,
    "p_value": 0.024,
    "cohens_d": -0.67,
    "significant": true
  }
}
```

**Interpretation:**
- **p < 0.05:** Statistically significant difference
- **Cohen's d:**
  - 0.2 = small effect
  - 0.5 = medium effect
  - 0.8 = large effect
- **Negative t-stat / Cohen's d:** H1B (negative framing) has lower polarity than H1A

## Expected Findings

If biases are present:
1. **H1:** Positive framing shifts sentiment upward (p < 0.05, d > 0.5)
2. **H2:** Team D mentioned more frequently in H2B despite lower win rate
3. **H3:** Problem-focused prompts yield more negative sentiment
4. **H4:** Different team emphasis between all-matches vs. friendlies
5. **H5:** Divergent team selections for "dominance" vs. "consistency"

## Citation

When referencing these visualizations in `REPORT.md`:

```markdown
See Figure 1 (`results/analysis/sentiment_by_variant.png`) for sentiment distribution.
Statistical tests revealed significant framing effects (t = -2.34, p = 0.024, d = -0.67).
```

---

**Last Updated:** November 15, 2025
